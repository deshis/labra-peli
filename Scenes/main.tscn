[gd_scene load_steps=11 format=3 uid="uid://chpqcweaiakc5"]

[ext_resource type="Script" path="res://Scripts/main.gd" id="1_cx8ll"]
[ext_resource type="PackedScene" uid="uid://tr2nbcbcmnu2" path="res://Scenes/Player.tscn" id="2_d6f1p"]
[ext_resource type="PackedScene" uid="uid://b267c0jqhpirv" path="res://Scenes/mental_asylum.tscn" id="4_b3svt"]
[ext_resource type="PackedScene" uid="uid://ekyt2ivgmsmy" path="res://Assets/monkey.glb" id="4_y0b6v"]
[ext_resource type="Script" path="res://Scripts/healthbar.gd" id="5_fvphu"]
[ext_resource type="Texture2D" uid="uid://b8ppk454bulgt" path="res://Sprites/UI/Bar/empty.png" id="5_lrdkv"]
[ext_resource type="PackedScene" uid="uid://dfbfxm4ytxuls" path="res://Scenes/enemy.tscn" id="5_rk86j"]
[ext_resource type="Texture2D" uid="uid://doceu5pqyb70l" path="res://Sprites/UI/Bar/full.png" id="6_dnqkv"]

[sub_resource type="Environment" id="Environment_p801p"]
ambient_light_source = 1
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_energy = 0.05
reflected_light_source = 1
ssr_fade_in = 1.42705
ssr_depth_tolerance = 71.71
ssao_radius = 4.2
ssao_detail = 4.55
ssao_horizon = 1.0
ssil_radius = 6.58
ssil_intensity = 17.3
ssil_sharpness = 0.0
ssil_normal_rejection = 0.0
sdfgi_enabled = true
sdfgi_read_sky_light = false
sdfgi_bounce_feedback = 0.0
fog_light_color = Color(0.662745, 0.47451, 0.666667, 1)
fog_light_energy = 0.0
fog_sun_scatter = 1.95
fog_density = 0.1153
volumetric_fog_density = 1.0
adjustment_brightness = 0.45
adjustment_contrast = 3.5
adjustment_saturation = 8.0

[sub_resource type="NavigationMesh" id="NavigationMesh_7y7p8"]
vertices = PackedVector3Array(-6.3943, 36.3372, 14.762, -6.3943, 36.3372, 27.512, 6.3557, 36.3372, 27.512, 6.3557, 36.3372, 14.762, -6.1443, 26.0872, 15.012, -6.1443, 26.0872, 27.262, 6.1057, 26.0872, 27.262, 6.1057, 26.0872, 15.012)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1), PackedInt32Array(7, 6, 4), PackedInt32Array(4, 6, 5)]
agent_height = 4.4
agent_radius = 1.2

[node name="Main" type="Node3D"]
script = ExtResource("1_cx8ll")

[node name="EnemyPathfindingTimer" type="Timer" parent="."]
wait_time = 0.2
autostart = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.999999, 2.54672e-06, -0.00165809, 0.00165809, -0.00153593, 0.999997, 0, -0.999999, -0.00153594, 0, 17.3782, 0)
light_color = Color(1, 0.180392, 0.556863, 1)
light_energy = 3.0
light_indirect_energy = 5.0
light_volumetric_fog_energy = 5.0
light_angular_distance = 0.5

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8.39535, 0)
light_color = Color(0.415686, 0.0823529, 1, 1)
light_energy = 0.2
omni_range = 40.0
omni_attenuation = 0.0563282

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_p801p")

[node name="mental-asylum" parent="." instance=ExtResource("4_b3svt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.39563, 0)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, 0, -164.091, -112.141)
navigation_mesh = SubResource("NavigationMesh_7y7p8")

[node name="mental-asylum" parent="NavigationRegion3D" instance=ExtResource("4_b3svt")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 25.5872, 21.1563)

[node name="monkey" parent="." instance=ExtResource("4_y0b6v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.85626, -30.9978, -7.17089)

[node name="Player" parent="." instance=ExtResource("2_d6f1p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -28.8339, 20.0543)

[node name="Enemy" parent="." instance=ExtResource("5_rk86j")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -31.0331, 9.91872)

[node name="UI" type="CanvasLayer" parent="."]

[node name="TextureProgressBar" type="TextureProgressBar" parent="UI" node_paths=PackedStringArray("player")]
offset_left = 37.0
offset_top = 31.0
offset_right = 1037.0
offset_bottom = 331.0
scale = Vector2(0.21, 0.21)
texture_under = ExtResource("5_lrdkv")
texture_progress = ExtResource("6_dnqkv")
script = ExtResource("5_fvphu")
player = NodePath("../../Player")

[connection signal="timeout" from="EnemyPathfindingTimer" to="." method="_on_enemy_pathfinding_timer_timeout"]
